<%@page trimDirectiveWhitespaces="true" contentType="text/html" pageEncoding="UTF-8"%>
<%@taglib prefix="t" tagdir="/WEB-INF/tags" %>
<%@ page import="codingmentor.javabackend.k3.Utils.UrlUtils" %>
<%@ taglib uri="http://java.sun.com/jstl/core_rt" prefix="c"%>
<%@taglib prefix="f" tagdir="/WEB-INF/tags/form_tags"%>

<t:layoutj pageTitle="${department.title} | Courses">

<ol class="breadcrumb">
  <%= render 'department_crumbs', department: @department %>
  <li class="active">Courses</li>
</ol>

<%= render 'tabs', current: :courses %>

<center>
  <input type="checkbox" id="showInactive" onchange="hideRows()">  Show Inactive Courses
</center>

<table id="courses" class="table table-hover" data-toggle="table" data-classes="table-no-bordered" data-search="true" data-sort-name="Course_Code" data-sort-order="asc">
  <thead>
    <tr>
	  <th data-sortable="true" data-field="Title">Title</th>
      <th data-sortable="true" data-field="Course_Code">Course code</th>
	</tr>
  </thead>
  <tbody>
    <% @courses.each do |course| %>
	  <tr data-active=<%= course.active? %> class=<%= course.active? ? "" : "active" %>>
	    <td><t:link_to text="${course.title} path="${COURSES_PATH}/:id" id="course.id"></t:link_to></td>
        <td>${course.course_code}</td>
	  </tr>
	<% end %>
  </tbody>
</table>
<br>
<t:link_to text='New Course', path=${UrlUtils.NEW_COURSE_PATH} id=${department.id} classBS="btn btn-success" ></t:link_to>


<script>
	
	function hideRows()
	{
	  showInactive = document.getElementById("showInactive").checked==true
	  
	  for(r of document.getElementById('courses').rows)
	  {
	    if(!showInactive && r.getAttribute("data-active")=="false")
		{
	      r.hidden = "true"
		}
		else
		{
		  r.hidden=null
		}
	  }
	}
</script>

<%-- <%= render "layouts/fix_turbolink_tables", bst_params: "onResetView: hideRows" %> %-->
</t:layoutj>
